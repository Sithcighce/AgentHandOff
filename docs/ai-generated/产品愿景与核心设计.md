1. 产品愿景与核心设计
版本: v7.0.0 (最终蓝图)
状态: 定稿

1.1 产品愿景
一句话描述:
为 AI 辅助开发提供"项目记忆系统"，让 Agent 像有经验的团队成员一样理解项目上下文，而不是每次对话都从零开始。

核心理念:

本地优先: 所有代码和知识库都在本地，开发者拥有完全控制权和隐私。

工作流引导: 通过一个“监工式”工作流，引导 Agent 遵循结构化的开发流程。

非侵入式: MCP 工具只负责 docs/ 知识库和工作流，绝不干涉 Agent 原生的代码编辑能力。

1.2 核心设计哲学: "非侵入式监工"
我们的核心原则是“非侵入式”：Agent 可以自由决定是使用其原生能力（写代码、操作 Git），还是使用我们提供的 MCP 工具（管理文档、遵循工作流）。我们通过工具的巧妙设计和清晰的提示词来引导 Agent 走上正确的道路，而不是在技术上限制它。

┌─────────────────────────────────────────┐
│              Agent 的能力边界                │
│                                         │
│  ┌──────────────┐      ┌───────────────┐  │
│  │  原生能力      │      │  MCP 工具       │  │
│  │ (不受控)      │      │ (受引导)      │  │
│  │              │      │               │  │
│  │ • 读/写代码   │      │ • 管理 docs/    │  │
│  │ • Git 操作    │      │ • 工作流引导    │  │
│  │ • 终端命令    │      │ • 会话状态      │  │
│  └──────────────┘      └───────────────┘  │
└─────────────────────────────────────────┘

1.3 核心洞察: "持久化即 Agent 主动写文档"
我们系统的持久化机制并非由服务器实现复杂的后台保存逻辑，而是基于一个更简单的哲学：end_job 工具会明确指示 Agent 调用 write_file，将任务总结、新的 agentreadme.md 等关键状态写入磁盘。

这意味着：

服务器是无状态的（仅在内存中管理会话）。

文档就是持久化本身。

Agent 是维护项目记忆的第一责任人。